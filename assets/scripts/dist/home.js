(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */e=function(){return n};var r,n={},a=Object.prototype,i=a.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},c="function"==typeof Symbol?Symbol:{},u=c.iterator||"@@iterator",s=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function d(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{d({},"")}catch(r){d=function(t,e,r){return t[e]=r}}function h(t,e,r,n){var a=e&&e.prototype instanceof g?e:g,i=Object.create(a.prototype),c=new V(n||[]);return o(i,"_invoke",{value:C(t,r,c)}),i}function v(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}n.wrap=h;var f="suspendedStart",y="suspendedYield",p="executing",m="completed",_={};function g(){}function w(){}function b(){}var q={};d(q,u,(function(){return this}));var S=Object.getPrototypeOf,k=S&&S(S(j([])));k&&k!==a&&i.call(k,u)&&(q=k);var L=b.prototype=g.prototype=Object.create(q);function E(t){["next","throw","return"].forEach((function(e){d(t,e,(function(t){return this._invoke(e,t)}))}))}function x(e,r){function n(a,o,c,u){var s=v(e[a],e,o);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==t(d)&&i.call(d,"__await")?r.resolve(d.__await).then((function(t){n("next",t,c,u)}),(function(t){n("throw",t,c,u)})):r.resolve(d).then((function(t){l.value=t,c(l)}),(function(t){return n("throw",t,c,u)}))}u(s.arg)}var a;o(this,"_invoke",{value:function(t,e){function i(){return new r((function(r,a){n(t,e,r,a)}))}return a=a?a.then(i,i):i()}})}function C(t,e,n){var a=f;return function(i,o){if(a===p)throw new Error("Generator is already running");if(a===m){if("throw"===i)throw o;return{value:r,done:!0}}for(n.method=i,n.arg=o;;){var c=n.delegate;if(c){var u=P(c,n);if(u){if(u===_)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===f)throw a=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=p;var s=v(t,e,n);if("normal"===s.type){if(a=n.done?m:y,s.arg===_)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(a=m,n.method="throw",n.arg=s.arg)}}}function P(t,e){var n=e.method,a=t.iterator[n];if(a===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=r,P(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),_;var i=v(a,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,_;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=r),e.delegate=null,_):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,_)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function I(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function V(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function j(e){if(e||""===e){var n=e[u];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function t(){for(;++a<e.length;)if(i.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=r,t.done=!0,t};return o.next=o}}throw new TypeError(t(e)+" is not iterable")}return w.prototype=b,o(L,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:w,configurable:!0}),w.displayName=d(b,l,"GeneratorFunction"),n.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},n.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,d(t,l,"GeneratorFunction")),t.prototype=Object.create(L),t},n.awrap=function(t){return{__await:t}},E(x.prototype),d(x.prototype,s,(function(){return this})),n.AsyncIterator=x,n.async=function(t,e,r,a,i){void 0===i&&(i=Promise);var o=new x(h(t,e,r,a),i);return n.isGeneratorFunction(e)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},E(L),d(L,l,"Generator"),d(L,u,(function(){return this})),d(L,"toString",(function(){return"[object Generator]"})),n.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},n.values=j,V.prototype={constructor:V,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(I),!t)for(var e in this)"t"===e.charAt(0)&&i.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,a){return c.type="throw",c.arg=t,e.next=n,a&&(e.method="next",e.arg=r),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],c=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var u=i.call(o,"catchLoc"),s=i.call(o,"finallyLoc");if(u&&s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a.finallyLoc,_):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),_},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),I(r),_}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;I(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:j(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=r),_}},n}function r(t,e,r,n,a,i,o){try{var c=t[i](o),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,a)}function n(t){return function(){var e=this,n=arguments;return new Promise((function(a,i){var o=t.apply(e,n);function c(t){r(o,a,i,c,u,"next",t)}function u(t){r(o,a,i,c,u,"throw",t)}c(void 0)}))}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(e,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,(i=a.key,o=void 0,o=function(e,r){if("object"!==t(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,r||"default");if("object"!==t(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(i,"string"),"symbol"===t(o)?o:String(o)),a)}var i,o}function o(t,e,r){return e&&i(t.prototype,e),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}var c=new Promise((function(t,e){var r=window.location.hostname;fetch("/getData.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"domain=".concat(r)}).then((function(t){return t.json()})).then((function(r){r.error?e("Product not found"):t(r.currency)})).catch((function(t){e(t)}))})),u=function(){var t,e;t=document.querySelector("[data-cart__button]"),e=document.querySelector(".nav__cart"),t.addEventListener("click",(function(){e.classList.toggle("d-flex")})),c.then((function(t){document.querySelectorAll(".product-form").forEach((function(e){var r,n=e.querySelector(".product__variants"),a=e.querySelector(".add-to-cart");n&&(r=new l(n)),localStorage.getItem("currency")&&localStorage.getItem("currency")===t||localStorage.setItem("currency",t);new s(a,t,r);e.addEventListener("submit",(function(t){t.preventDefault()}))}))})).catch((function(t){console.error("Error:",t)}))},s=function(){function t(e,r,n){a(this,t),this.addToCartBlock=e,this.alias=this.addToCartBlock.getAttribute("data-alias"),this.plus=this.addToCartBlock.querySelector(".add-to-cart__plus"),this.minus=this.addToCartBlock.querySelector(".add-to-cart__minus"),this.quantity=this.addToCartBlock.querySelector(".qnt-counter__input")||this.addToCartBlock.querySelector("input.add-to-cart__quantity"),this.newPrice=this.addToCartBlock.querySelector(".new-price .sum"),this.oldPrice=this.addToCartBlock.querySelector(".old-price .sum"),this.currency=r,this.name=this.add,this.variantForm=n,this.init()}var r,i;return o(t,[{key:"init",value:(i=n(e().mark((function t(){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getData();case 2:this.product=t.sent,this.price=this.product.price[this.currency],this.productId=this.product.id,this.listeners(),this.initPrice();case 7:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"plusHandler",value:function(){this.quantity.value=parseInt(this.quantity.value,10)+1,this.getQuantity()>1&&(this.minus.disabled=!1),this.calculateSum()}},{key:"minusHandler",value:function(){this.quantity.value=Math.max(0,parseInt(this.quantity.value,10)-1),this.getQuantity()<=1&&(this.quantity.value=1,this.minus.disabled=!0),this.calculateSum()}},{key:"inputHandler",value:function(){(this.getQuantity()<=1||!this.getQuantity())&&(this.quantity.value=1,this.minus.disabled=!0),this.calculateSum()}},{key:"initPrice",value:function(){this.newPrice.textContent=this.getQuantity()*this.price}},{key:"calculateSum",value:function(){this.summary=this.getQuantity()*this.price,this.newPrice.textContent=this.summary}},{key:"getQuantity",value:function(){return parseInt(this.quantity.value,10)}},{key:"listeners",value:function(){this.plus.addEventListener("click",this.plusHandler.bind(this)),this.minus.addEventListener("click",this.minusHandler.bind(this)),this.quantity.addEventListener("input",this.inputHandler.bind(this)),this.addToCartBlock.querySelector(".add-to-cart__button").addEventListener("click",this.addToCartHandler.bind(this))}},{key:"addToCartHandler",value:function(){var t=this.variantForm?this.variantForm.variantId:null,e=t?"".concat(this.productId,"-").concat(t):this.productId;h.addProduct({id:e,name:"Product Name",price:this.price,quantity:this.getQuantity()}),h.updateCartView()}},{key:"getData",value:(r=n(e().mark((function t(){var r,n;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.variantForm&&this.variantForm.variantId,t.prev=1,t.next=4,fetch("/getData.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"alias=".concat(this.alias)});case 4:return r=t.sent,t.next=7,r.json();case 7:if(!(n=t.sent).error){t.next=13;break}return console.error("Product not found"),t.abrupt("return",null);case 13:return t.abrupt("return",n.product);case 14:t.next=20;break;case 16:return t.prev=16,t.t0=t.catch(1),console.error("Error:",t.t0),t.abrupt("return",null);case 20:case"end":return t.stop()}}),t,this,[[1,16]])}))),function(){return r.apply(this,arguments)})}]),t}(),l=function(){function t(e){a(this,t),this.form=e,this.rows=this.form.querySelectorAll(".product__variant"),this.variants=this.form.querySelectorAll(".product__variant__block"),this._variantId=null,this._activeVariants=[],this.init()}return o(t,[{key:"init",value:function(){this.searchActiveVariants(),this.variantId=this.activeVariants,this.addClickHandlers()}},{key:"addClickHandlers",value:function(){var t=this;this.variants.forEach((function(e){e.addEventListener("click",t.changeActiveVariant.bind(t))}))}},{key:"changeActiveVariant",value:function(t){var e=t.target,r=e.closest(".product__variant");if(!e.classList.contains("active")){var n=r.querySelector(".product__variant__block.active");n&&n.classList.remove("active"),e.classList.add("active"),this.searchActiveVariants(),this.variantId=this.activeVariants}}},{key:"activeVariants",get:function(){return this._activeVariants},set:function(t){Array.isArray(t)?this._activeVariants=t:console.error("Variants must be an array")}},{key:"searchActiveVariants",value:function(){var t=[];this.rows.forEach((function(e){var r=e.querySelector(".product__variant__block.active");r&&t.push(r)})),this.activeVariants=t}},{key:"variantId",get:function(){return this._variantId},set:function(t){var e=[];t.forEach((function(t){e.push(t.getAttribute("data-id"))})),this._variantId=e.join("")}}]),t}(),d=function(){function t(){a(this,t),this.cart=this.loadCart(),this.currency=this.getCurrency(),this.updateCartView(),this.addEventListeners()}return o(t,[{key:"loadCart",value:function(){var t=localStorage.getItem("cart");return t?JSON.parse(t):[]}},{key:"getCurrency",value:function(){return localStorage.getItem("currency")}},{key:"saveCart",value:function(){localStorage.setItem("cart",JSON.stringify(this.cart))}},{key:"addProduct",value:function(t){var e=this.cart.find((function(e){return e.id===t.id&&e.variantId===t.variantId}));e?e.quantity+=t.quantity:this.cart.push(t),this.saveCart(),this.updateCartView()}},{key:"removeProduct",value:function(t,e){this.cart=this.cart.filter((function(r){return!(r.id===t&&(!e||r.variantId===e))})),this.saveCart(),this.updateCartView()}},{key:"updateQuantity",value:function(t,e,r){var n=this.cart.find((function(r){return r.id===t&&r.variantId===e}));n&&(n.quantity=r),this.saveCart(),this.updateCartView()}},{key:"addEventListeners",value:function(){var t=this;document.querySelector(".nav__cart__details").addEventListener("click",(function(e){var r=e.target;if(r.matches("[data-navbar-cart-remove]")){var n=r.closest(".nav__cart__row--product").querySelector(".nav__cart__remove").getAttribute("data-id");t.removeProduct(n,null)}if(r.matches("[data-navbar-cart-plus]")){var a=r.closest(".qnt-counter").querySelector(".qnt-counter__input"),i=r.closest(".nav__cart__row--product").querySelector("[data-id]").getAttribute("data-id"),o=t.cart.find((function(t){return t.id===i}));o.quantity++,a.value=o.quantity,t.saveCart(),t.updateCartView()}if(r.matches("[data-navbar-cart-minus]")){var c=r.closest(".qnt-counter").querySelector(".qnt-counter__input"),u=r.closest(".nav__cart__row--product").querySelector("[data-id]").getAttribute("data-id"),s=t.cart.find((function(t){return t.id===u}));s.quantity>1&&(s.quantity--,c.value=s.quantity,t.saveCart(),t.updateCartView())}}))}},{key:"updateCartView",value:function(){var t=this;this.updateCartSummary();var e=document.querySelector(".nav__cart__details"),r=e.querySelector(".nav__cart__row--footer"),n=document.querySelector(".nav__cart__width-container"),a=document.querySelector(".nav__cart-badge");if(a.textContent=this.getTotalQuantity(),this.cart.length>0){n.classList.remove("empty"),a.classList.add("d-block"),this.cart.forEach((function(n,a){var i=e.querySelectorAll(".nav__cart__row--product")[a];i||((i=document.createElement("div")).classList.add("nav__cart__row","nav__cart__row--product"),e.insertBefore(i,r)),i.innerHTML='\n                    <div class="nav__cart__cell" data-navbar-cart-name>'.concat(n.name,'</div>\n                    <div class="nav__cart__cell">\n                        <div class="qnt-counter qnt-counter--small qnt-counter--inline">\n                            <button type="button" class="qnt-counter__button  qnt-counter__button--minus" data-navbar-cart-minus>-</button>\n                            <input type="text" class="qnt-counter__input" value="').concat(n.quantity,'" disabled data-navbar-cart-quantity>\n                            <button type="button" class="qnt-counter__button  qnt-counter__button--plus" data-navbar-cart-plus>+</button>\n                        </div>\n                    </div>\n                    <div class="nav__cart__cell" data-navbar-cart-price>\n                        <div class="old-price" style="display: none"><span>').concat(n.old_price,'</span><span class="currency">&nbsp;').concat(t.currency,'</span></div>\n                        <div class="new-price"><span>').concat(n.price*n.quantity,'</span><span class="currency">&nbsp;').concat(t.currency,'</span></div>\n                    </div>\n                    <div class="nav__cart__cell"><button class="nav__cart__remove" data-id="').concat(n.id,'" data-navbar-cart-remove></button></div>\n                ');var o=i.querySelector(".qnt-counter__button--minus");n.quantity<=1?o.disabled=!0:o.disabled=!1}));var i=e.querySelectorAll(".nav__cart__row--product");if(i.length>this.cart.length)for(var o=this.cart.length;o<i.length;o++)i[o].remove()}else n.classList.add("empty"),a.classList.remove("d-block")}},{key:"getTotalPrice",value:function(){return this.cart.reduce((function(t,e){return t+e.price*e.quantity}),0)}},{key:"getTotalQuantity",value:function(){return this.cart.reduce((function(t,e){return t+e.quantity}),0)}},{key:"updateCartSummary",value:function(){var t=document.querySelector("#cart-quantity"),e=(document.querySelector("#cart-old-price span"),document.querySelector("#cart-new-price span"));t.textContent=this.getTotalQuantity(),e.textContent=this.getTotalPrice()}}]),t}(),h=new d,v=function(){return window.scrollY>50},f=function(t){var e=v()?"10px":"15px";t.style.setProperty("--nav-padding",e)},y=function(t){var e=p(t.previousElementSibling);t.style.setProperty("--body-padding","".concat(e,"px"))},p=function(t){return t.offsetHeight},m=function(t,e){f(t),_(t),y(e)},_=function(t){v()?t.classList.contains("nav--scrolled")||t.classList.add("nav--scrolled"):t.classList.contains("nav--scrolled")&&t.classList.remove("nav--scrolled")};const g=function(){var t=document.querySelector(".nav"),e=t.nextElementSibling;e.classList.add("padding-top-element"),m(t,e),t.addEventListener("transitionend",(function(){y(e)})),window.addEventListener("scroll",(function(){m(t,e)})),window.addEventListener("resize",(function(){m(t,e)}))};var w=function(){var t=document.querySelector("#home-page-title");window.innerWidth>=768?document.querySelector(".hero").prepend(t):document.querySelector("main").prepend(t)};window.addEventListener("load",(function(){u(),g(),w(),window.addEventListener("resize",(function(){w()}))}))})();